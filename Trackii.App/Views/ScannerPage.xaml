<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Trackii.App.Views.ScannerPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Shell.NavBarIsVisible="False"
    BackgroundColor="#060B16"
    Title="Scanner">
    <ScrollView>
        <VerticalStackLayout Padding="18,18,18,28" Spacing="16">
            <Frame BackgroundColor="#111827" CornerRadius="28" HasShadow="False" Padding="0" BorderColor="#1F2937">
                <Grid HeightRequest="250">
                    <ContentView x:Name="ScannerHost" />
                    <BoxView BackgroundColor="#FFFFFF" Opacity="0.06" />
                    <BoxView x:Name="ScanLine" HeightRequest="3" BackgroundColor="#22D3EE" Opacity="0.9" HorizontalOptions="Fill" VerticalOptions="Start" />

                    <Frame x:Name="DetectedOverlay" BackgroundColor="#0EA5E9" CornerRadius="16" Padding="12" Opacity="0" HorizontalOptions="Center" VerticalOptions="Center" HasShadow="False">
                        <HorizontalStackLayout Spacing="8">
                            <Label Text="✓" TextColor="White" FontAttributes="Bold" />
                            <Label x:Name="DetectedTextLabel" Text="Código detectado" TextColor="White" FontAttributes="Bold" />
                        </HorizontalStackLayout>
                    </Frame>

                    <Grid x:Name="LoadingOverlay" BackgroundColor="#AA020617" IsVisible="False">
                        <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="12">
                            <ActivityIndicator x:Name="LoadingIndicator" IsRunning="False" Color="#38BDF8" />
                            <Label Text="Consultando información..." TextColor="#E2E8F0" FontAttributes="Bold" />
                        </VerticalStackLayout>
                    </Grid>
                </Grid>
            </Frame>

            <Frame BackgroundColor="#111827" CornerRadius="20" HasShadow="False" Padding="14" BorderColor="#1F2937">
                <VerticalStackLayout Spacing="4">
                    <Label Text="Estado del escaneo" FontSize="12" TextColor="#94A3B8" />
                    <Label x:Name="StatusLabel" Text="Escaneo instantáneo activo" FontAttributes="Bold" FontSize="16" TextColor="#F8FAFC" />
                    <Label x:Name="DetectionLabel" Text="Listo para detectar códigos." FontSize="13" TextColor="#38BDF8" />
                </VerticalStackLayout>
            </Frame>

            <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                <Frame BackgroundColor="#0F172A" CornerRadius="18" HasShadow="False" Padding="12" BorderColor="#1E293B">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Orden" FontAttributes="Bold" TextColor="#E2E8F0" />
                        <Entry x:Name="OrderEntry" Placeholder="7 dígitos" TextColor="#F8FAFC" PlaceholderColor="#64748B" TextChanged="OnOrderChanged" />
                    </VerticalStackLayout>
                </Frame>
                <Frame Grid.Column="1" BackgroundColor="#0F172A" CornerRadius="18" HasShadow="False" Padding="12" BorderColor="#1E293B">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Parte" FontAttributes="Bold" TextColor="#E2E8F0" />
                        <Entry x:Name="PartEntry" Placeholder="Código de parte" TextColor="#F8FAFC" PlaceholderColor="#64748B" TextChanged="OnPartChanged" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <Frame BackgroundColor="#0F172A" CornerRadius="18" HasShadow="False" Padding="12" BorderColor="#1E293B">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Información de producto" FontAttributes="Bold" TextColor="#E2E8F0" />
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12" RowDefinitions="Auto,Auto">
                        <VerticalStackLayout Spacing="6">
                            <Label Text="Área" FontAttributes="Bold" TextColor="#CBD5E1" />
                            <Entry x:Name="AreaEntry" Text="-" IsReadOnly="True" TextColor="#F8FAFC" PlaceholderColor="#64748B" />
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Column="1" Spacing="6">
                            <Label Text="Familia" FontAttributes="Bold" TextColor="#CBD5E1" />
                            <Entry x:Name="FamilyEntry" Text="-" IsReadOnly="True" TextColor="#F8FAFC" PlaceholderColor="#64748B" />
                        </VerticalStackLayout>
                        <VerticalStackLayout Grid.Row="1" Grid.ColumnSpan="2" Spacing="6">
                            <Label Text="Subfamilia" FontAttributes="Bold" TextColor="#CBD5E1" />
                            <Entry x:Name="SubfamilyEntry" Text="-" IsReadOnly="True" TextColor="#F8FAFC" PlaceholderColor="#64748B" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <Frame BackgroundColor="#0F172A" CornerRadius="18" HasShadow="False" Padding="12" BorderColor="#1E293B">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Cantidad" FontAttributes="Bold" TextColor="#E2E8F0" />
                    <Entry x:Name="QuantityEntry" Placeholder="Ingresa cantidad" Keyboard="Numeric" TextColor="#F8FAFC" PlaceholderColor="#64748B" TextChanged="OnQuantityChanged" />
                    <Label x:Name="QuantityHintLabel" Text="" TextColor="#94A3B8" FontSize="12" />
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button x:Name="RegisterButton" Text="Registrar" BackgroundColor="#22C55E" TextColor="White" CornerRadius="14" HeightRequest="46" Clicked="OnRegisterClicked" />
                        <Button x:Name="ScrapButton" Grid.Column="1" Text="Scrap" BackgroundColor="#F43F5E" TextColor="White" CornerRadius="14" HeightRequest="46" Clicked="OnScrapClicked" />
                    </Grid>
                    <Button x:Name="ReworkButton" Text="Rework" BackgroundColor="#F59E0B" TextColor="#111827" CornerRadius="14" HeightRequest="46" Clicked="OnReworkClicked" />
                </VerticalStackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
